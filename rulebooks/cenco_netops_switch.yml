---
- name: Listen for events on a webhook
  hosts: all
  sources:
    - ansible.eda.webhook:
        host: 0.0.0.0
        port: 5000

  rules:
    - name: Filter payload for hostnames
      condition: event.payload.text is match("!netops setup vlan")
      action:
        debug:
        var: ansible_eda.event.payload.text
        verbosity: 4
      #  run_job_template:
      #   name: cenco_filter_regex.yml
      #    post_events: true

    #- name: Backup specified switch
    #  condition: event.switch_devices is defined 
    #  action:  
    #    run_job_template:
    #      name: cenco_check_switch.yml
